// Elements
const birthdayName = document.getElementById('birthdayName');
const ageElement = document.getElementById('age');
const nameInput = document.getElementById('nameInput');
const ageInput = document.getElementById('ageInput');
const updateBtn = document.getElementById('updateBtn');
const cakeBtn = document.getElementById('cakeBtn');
const balloonBtn = document.getElementById('balloonBtn');
const wishBtn = document.getElementById('wishBtn');
const birthdayMusic = document.getElementById('birthdayMusic');
const container = document.querySelector('.container');

// Update birthday details
updateBtn.addEventListener('click', () => {
    if (nameInput.value.trim()) {
        birthdayName.textContent = nameInput.value;
    }
    if (ageInput.value) {
        ageElement.textContent = ageInput.value;
    }
    
    // Show confirmation
    alert('Birthday updated successfully! ðŸŽ‰');
    nameInput.value = '';
    ageInput.value = '';
});

// Cut the cake animation
cakeBtn.addEventListener('click', () => {
    const cake = document.querySelector('.cake');
    const flame = document.querySelector('.flame');
    
    // Blow out candle
    flame.style.opacity = '0';
    flame.style.transform = 'scale(0.5)';
    
    // Cake animation
    cake.style.animation = 'shake 0.5s ease-in-out';
    
    // Create cake slices animation
    setTimeout(() => {
        cake.style.animation = '';
        flame.style.opacity = '1';
        flame.style.transform = 'scale(1)';
    }, 500);
    
    // Show message
    alert('ðŸŽ‚ The cake has been cut! Enjoy! ðŸ°');
});

// Birthday music toggle
let musicPlaying = false;
balloonBtn.addEventListener('click', () => {
    if (!musicPlaying) {
        birthdayMusic.play();
        balloonBtn.innerHTML = '<i class="fas fa-pause"></i> Pause Music';
        musicPlaying = true;
    } else {
        birthdayMusic.pause();
        balloonBtn.innerHTML = '<i class="fas fa-music"></i> Birthday Music';
        musicPlaying = false;
    }
});

// Make a wish functionality
wishBtn.addEventListener('click', () => {
    // Create falling stars effect
    for (let i = 0; i < 20; i++) {
        createStar();
    }
    
    // Show wish message
    const messages = [
        "âœ¨ Your wish has been sent to the universe! âœ¨",
        "ðŸŒŸ May all your wishes come true! ðŸŒŸ",
        "ðŸ’« The birthday fairies have received your wish! ðŸ’«",
        "ðŸŽ‡ Make a wish and blow out the candles! ðŸŽ‡"
    ];
    const randomMessage = messages[Math.floor(Math.random() * messages.length)];
    alert(randomMessage);
});

// Create falling stars for wish animation
function createStar() {
    const star = document.createElement('div');
    star.innerHTML = 'âœ¨';
    star.style.position = 'absolute';
    star.style.fontSize = Math.random() * 20 + 10 + 'px';
    star.style.left = Math.random() * 100 + 'vw';
    star.style.top = '-50px';
    star.style.opacity = '0.8';
    star.style.zIndex = '1000';
    document.body.appendChild(star);
    
    // Animate star
    const duration = Math.random() * 2 + 1;
    star.style.transition = `all ${duration}s linear`;
    
    setTimeout(() => {
        star.style.top = '100vh';
        star.style.transform = 'rotate(' + Math.random() * 360 + 'deg)';
        star.style.opacity = '0';
    }, 10);
    
    // Remove star after animation
    setTimeout(() => {
        star.remove();
    }, duration * 1000);
}

// Create confetti
function createConfetti() {
    const confettiContainer = document.querySelector('.confetti');
    const colors = ['#ff6b6b', '#4ecdc4', '#ffd166', '#06d6a0', '#118ab2', '#ef476f'];
    
    for (let i = 0; i < 100; i++) {
        const confetti = document.createElement('div');
        confetti.style.position = 'absolute';
        confetti.style.width = Math.random() * 10 + 5 + 'px';
        confetti.style.height = Math.random() * 10 + 5 + 'px';
        confetti.style.backgroundColor = colors[Math.floor(Math.random() * colors.length)];
        confetti.style.borderRadius = '50%';
        confetti.style.left = Math.random() * 100 + '%';
        confetti.style.top = Math.random() * 100 + '%';
        confetti.style.opacity = '0.7';
        confetti.style.animation = `fall ${Math.random() * 3 + 2}s linear infinite`;
        confettiContainer.appendChild(confetti);
    }
}

// Add CSS for falling animation
const style = document.createElement('style');
style.textContent = `
    @keyframes fall {
        0% { transform: translateY(-100vh) rotate(0deg); }
        100% { transform: translateY(100vh) rotate(360deg); }
    }
    
    @keyframes shake {
        0%, 100% { transform: translateX(0); }
        25% { transform: translateX(-10px); }
        75% { transform: translateX(10px); }
    }
`;
document.head.appendChild(style);

// Initialize confetti
createConfetti();

// Auto-start confetti every 5 seconds
setInterval(() => {
    const confetti = document.querySelectorAll('.confetti div');
    confetti.forEach(c => {
        c.style.left = Math.random() * 100 + '%';
        c.style.top = Math.random() * 100 + '%';
    });
}, 5000);
